_link = {};

_link.eng = {
    bizlogin : 'https://app.booxi.com/?locale=en#login',
    bizlogin_test : 'https://app.booxi.com/?env=dev&locale=en#login',
    home : '',
    home_baked : 'en',
    feat_roi: 'roi',
    feat_page: 'features',
    search : 'search',
    everyone : 'everyone',
    everyone_faq : 'everyone/faq',
    business : 'business',
    business_faq : 'business/faq',
    signup : 'business/signup',
    signup_done : 'complete',
    signup_complete : 'complete',
    about : 'about',
    press : 'about/press',
    legal : 'about/privacy-legal',
    company : 'about/company',
    fordev : 'developers',
    developers : 'developers',
    parnters_pages : 'https://www.booxi.com/partners/index-en/',
    associations : 'associations-schools',
    affiliates : 'affiliates',
    technology : 'technology',
    blog : 'https://www.booxi.com/blog/index-en/',
    feat_appointment : 'business/appointments',
    feat_clients : 'business/client-relations',
    feat_website : 'business/website',
    feat_manage : 'business/management',
    pricing:'business/pricing',
    form_sales:'form/sales',
    form_sales_ls:'form/ls-sales',
    dev_book_now:'developers/booknow',
    dev_wordpress:'developers/wordpress',
    dev_wix:'developers/wix',
    dev_ls:'developers/lightspeed',
    // NEW
    web_store_apple :   'https://itunes.apple.com/ca/app/booxi-for-business/id742658170?mt=8&uo=4&l=en',
    web_store_google :  'https://play.google.com/store/apps/details?id=com.booxi.merchant&hl=en',
    social_facebook :   'https://www.facebook.com/booxicom',
    social_twitter :    'https://twitter.com/booxicom',
    social_linkedin :   'https://www.linkedin.com/company/booxi',
    social_google :     'https://plus.google.com/+booxicom/posts',
    social_youtube :    'https://www.youtube.com/channel/UCMNYIrJIXDZ6WWHUclnK28Q',
    // -------------
    help_center :       'http://help.booxi.com/',
    vp__salon :         'https://www.booxi.com/b/salon-software/',
    vp__massage_therapy:'https://www.booxi.com/b/massage-therapy-software/',
    vp__nail_salon :    'https://www.booxi.com/b/nail-salon-software/',
    vp__nutritionist :  'https://www.booxi.com/b/nutritionist-software/',
    vp__pet_grooming :  'https://www.booxi.com/b/pet-grooming-software/',
    vp__osteopath :     'https://www.booxi.com/b/osteopath-software/',
    vp__eyelash :       'https://www.booxi.com/b/eyelash-extension-software/',
    vp__chiropractor :  'https://www.booxi.com/b/chiropractor-software/',
    vp__bike_shop :     'https://www.booxi.com/b/bike-shop-software/',
    vp__beauty :        'https://www.booxi.com/b/beauty-salon-software/',
    vp__tanning_salon : 'https://www.booxi.com/b/tanning-salon-software/',
    vp__tattoo :        'https://www.booxi.com/b/tattoo-shop-software/',
    //video links
    vid_idx_1: 'videos/shouli',
    vid_idx_2: 'videos/ragnok',
    vid_idx_3: 'videos/sab3000'
};

_link.fre = {
    bizlogin : 'https://app.booxi.com/?locale=fr#login',
    bizlogin_test : 'https://app.booxi.com/?env=dev&locale=fr#login',
    home : '',
    home_baked : 'fr',
    feat_roi: 'retour-sur-investissement',
    feat_page: 'fonctionnalites',
    search : 'rechercher',
    everyone : 'tous',
    everyone_faq : 'tous/faq',
    business : 'affaires',
    business_faq : 'affaires/faq',
    signup : 'affaires/inscription',
    signup_done : 'complet',
    signup_complete : 'complet',
    about : 'a-propos',
    press : 'a-propos/presse',
    legal : 'a-propos/mentions-legales',
    company : 'a-propos/entreprise',
    fordev : 'developpeurs',
    developers : 'developpeurs',
    parnters_pages : 'https://www.booxi.com/partners/index-fr/',
    associations : 'associations-ecoles',
    affiliates : 'affilies',
    technology : 'technologie',
    blog : 'https://www.booxi.com/blog/index-fr/',
    feat_appointment : 'affaires/rendez-vous',
    feat_clients : 'affaires/relation-client',
    feat_website : 'affaires/site-web',
    feat_manage : 'affaires/gestion-flexible',
    pricing:'affaires/tarification',
    form_sales:'form/ventes',
    form_sales_ls:'form/ls-ventes',
    dev_book_now:'developpeurs/booknow',
    dev_wordpress:'developpeurs/wordpress',
    dev_wix:'developpeurs/wix',
    dev_ls:'developpeurs/lightspeed',
    // NEW
    web_store_apple :   'https://itunes.apple.com/ca/app/booxi-for-business/id742658170?mt=8&uo=4&l=fr',
    web_store_google :  'https://play.google.com/store/apps/details?id=com.booxi.merchant&hl=fr',
    social_facebook :   'https://www.facebook.com/booxicom',
    social_twitter :    'https://twitter.com/booxicom',
    social_linkedin :   'https://www.linkedin.com/company/booxi',
    social_google :     'https://plus.google.com/+booxicom/posts',
    social_youtube :    'https://www.youtube.com/channel/UCMNYIrJIXDZ6WWHUclnK28Q',
    // -------------
    help_center :       'http://help.booxi.com/',
    vp__salon :         'https://www.booxi.com/b/logiciel-salons-de-coiffure/',
    vp__massage_therapy:'https://www.booxi.com/b/massotherapeutes/',
    vp__nail_salon :    'https://www.booxi.com/b/salon-de-manucure/',
    vp__nutritionist :  'https://www.booxi.com/b/nutritionnistes/',
    vp__pet_grooming :  'https://www.booxi.com/b/logiciel-toiletteur-pour-animaux/',
    vp__osteopath :     'https://www.booxi.com/b/osteopathes/',
    vp__eyelash :       'https://www.booxi.com/b/extensions-de-cils/',
    vp__chiropractor :  'https://www.booxi.com/b/chiropraticien/',
    vp__bike_shop :     'https://www.booxi.com/b/magasin-de-velos/',
    vp__beauty :        'https://www.booxi.com/b/salon-de-beaute/',
    vp__tanning_salon : 'https://www.booxi.com/b/tanning-salon-software',
    vp__tattoo :        'https://www.booxi.com/b/logiciel-salon-de-tatouage/',
    //video links
    vid_idx_1: 'videos-fr/shouli',
    vid_idx_2: 'videos-fr/ragnok',
    vid_idx_3: 'videos-fr/sab3000'
};

_link.spa = cloneBaseObject( _link.eng );
_link.spa.search = 'buscar';
_link.spa.bizlogin = 'https://app.booxi.com/?locale=es#login';
_link.spa.bizlogin_test = 'https://app.booxi.com/?env=dev&locale=es#login';


_link.por = cloneBaseObject( _link.eng );
_link.por.search = 'search-pt';
_link.por.bizlogin = 'https://app.booxi.com/?locale=pt#login';
_link.por.bizlogin_test = 'https://app.booxi.com/?env=dev&locale=pt#login';


_link.nld = cloneBaseObject( _link.eng );
_link.nld.search = 'search-nl';

function lng_getGBLangCode()
{
    if(window.bxGlobal === undefined)
        return 'eng';

    if(bxGlobal.defLang === undefined)
        return 'eng';

    return bxGlobal.defLang;
}

function lng_getLink_byLang(bxLink, lang)
{
    if(utlIsVarObject(_link) !== true)
        return '';

    if(utlIsVarObject(_link[utlLC(lang)]) !== true)
        return '';

    var lgTab = _link[utlLC(lang)];

    if(lgTab[utlLC(bxLink)] !== undefined)
        return lgTab[utlLC(bxLink)];

    return '';
}

function lng_changeLangOp(ele)
{
    $('.bxFM_submenu').attr('data-is-active', 'false');
    var lng = ele.getAttribute('data-lang-op');

    if( (lng === null) || (lng === undefined) )
        return;

    lng = utlLC(lng);
    lng_saveLangToCookie(lng);

    if(lng_getGBLangCode() == lng)
    {
        return;
    }


    if(window.fnLocalLangOverride !== undefined)
        fnLocalLangOverride(lng);
    else
    {
        if(window.fnxDynamicSetLang !== undefined)
            fnxDynamicSetLang(lng);
    }
}

function lng_saveLangToCookie(lng)
{
    var bx_uprof = utlX_readCookie('bx_uprof');
    var uProfile = null;

    if(bx_uprof !== null)
    {
        uProfile = utlSmartDecodeJson(bx_uprof, null);
        if(uProfile !== null)
            uProfile.bx_lang = lng;
    }

    if(uProfile === null)
    {
        uProfile = {bx_data_ver: '0.1.3', bx_uid: randomString(20), bx_lang: lng,
            bx_city:'', bx_country:'', bx_lat:'', bx_lng:'', bx_last_visit:'', bx_vis_cnt:0,
            bx_last_ip:'', bx_b_fetch_byIP:false
        };
    }

    utlX_writeCookie('bx_uprof', utlSmartEncodeJson(uProfile), 60);
}

var lang = {};
var link = {};

//langTwoCharLookup : {en:'eng', fr:'fre', es:'spa', pt:'por', nld:'nl'},
function auto_choose_lang()
{
    var tmpLng = utlLC($('html').attr('lang'));
    var lng = 'eng';

    if(tmpLng.length == 2)
    {
        var lngTable = {en:'eng', fr:'fre', es:'spa', pt:'por', nld:'nl'};
        if(lngTable[tmpLng] !== undefined)
            lng = lngTable[tmpLng];
    }
    else
        lng = utlLC(tmpLng);

    if(_lang[lng] === undefined)
        lng = 'eng';

    lang = _lang[lng];
    link = _link[lng];
}

function fnLang_getBxLink(bxlink)
{
    var linkStr = '';

    if(link[bxlink] === undefined)
    {
        if(_link.eng[bxlink] !== undefined)
            linkStr = _link.eng[bxlink];
    }
    else
        linkStr = link[bxlink];

    if(linkStr.search(/^http/i) != -1)
        return linkStr;

    return __fancy_path__+ linkStr;
}
